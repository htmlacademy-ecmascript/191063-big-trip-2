(()=>{var e={10:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(537),s=n.n(i),a=n(645),r=n.n(a)()(s());r.push([e.id,".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n","",{version:3,sources:["webpack://./src/framework/view/abstract-view.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE;;IAEE,wBAAwB;EAC1B;;EAEA;;;;;IAKE,2BAA2B;EAC7B;;EAEA;;;;IAIE,0BAA0B;EAC5B;AACF",sourcesContent:[".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n"],sourceRoot:""}]);const o=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(r[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);i&&r[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),s&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=s):l[4]="".concat(s)),t.push(l))}},t}},537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),a="/*# ".concat(s," */");return[t].concat([a]).join("\n")}return[t].join("\n")}},484:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",r="day",o="week",c="month",d="quarter",l="year",f="date",u="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},b=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},m={s:b,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+b(i,2,"0")+":"+b(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(i,c),a=n-s<0,r=t.clone().add(i+(a?-1:1),c);return+(-(i+(n-s)/(a?s-r:r-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:l,w:o,d:r,D:f,h:a,m:s,s:i,ms:n,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",_={};_[y]=v;var g="$isDayjsObject",$=function(e){return e instanceof E||!(!e||!e[g])},C=function e(t,n,i){var s;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();_[a]&&(s=a),n&&(_[a]=n,s=a);var r=t.split("-");if(!s&&r.length>1)return e(r[0])}else{var o=t.name;_[o]=t,s=o}return!i&&s&&(y=s),s||!i&&y},k=function(e,t){if($(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new E(n)},T=m;T.l=C,T.i=$,T.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function v(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var b=v.prototype;return b.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(p);if(i){var s=i[2]-1||0,a=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(t)}(e),this.init()},b.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},b.$utils=function(){return T},b.isValid=function(){return!(this.$d.toString()===u)},b.isSame=function(e,t){var n=k(e);return this.startOf(t)<=n&&n<=this.endOf(t)},b.isAfter=function(e,t){return k(e)<this.startOf(t)},b.isBefore=function(e,t){return this.endOf(t)<k(e)},b.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(e,t){var n=this,d=!!T.u(t)||t,u=T.p(e),p=function(e,t){var i=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return d?i:i.endOf(r)},h=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,b=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case l:return d?p(1,0):p(31,11);case c:return d?p(1,b):p(0,b+1);case o:var _=this.$locale().weekStart||0,g=(v<_?v+7:v)-_;return p(d?m-g:m+(6-g),b);case r:case f:return h(y+"Hours",0);case a:return h(y+"Minutes",1);case s:return h(y+"Seconds",2);case i:return h(y+"Milliseconds",3);default:return this.clone()}},b.endOf=function(e){return this.startOf(e,!1)},b.$set=function(e,t){var o,d=T.p(e),u="set"+(this.$u?"UTC":""),p=(o={},o[r]=u+"Date",o[f]=u+"Date",o[c]=u+"Month",o[l]=u+"FullYear",o[a]=u+"Hours",o[s]=u+"Minutes",o[i]=u+"Seconds",o[n]=u+"Milliseconds",o)[d],h=d===r?this.$D+(t-this.$W):t;if(d===c||d===l){var v=this.clone().set(f,1);v.$d[p](h),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},b.set=function(e,t){return this.clone().$set(e,t)},b.get=function(e){return this[T.p(e)]()},b.add=function(n,d){var f,u=this;n=Number(n);var p=T.p(d),h=function(e){var t=k(u);return T.w(t.date(t.date()+Math.round(e*n)),u)};if(p===c)return this.set(c,this.$M+n);if(p===l)return this.set(l,this.$y+n);if(p===r)return h(1);if(p===o)return h(7);var v=(f={},f[s]=e,f[a]=t,f[i]=1e3,f)[p]||1,b=this.$d.getTime()+n*v;return T.w(b,this)},b.subtract=function(e,t){return this.add(-1*e,t)},b.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||u;var i=e||"YYYY-MM-DDTHH:mm:ssZ",s=T.z(this),a=this.$H,r=this.$m,o=this.$M,c=n.weekdays,d=n.months,l=n.meridiem,f=function(e,n,s,a){return e&&(e[n]||e(t,i))||s[n].slice(0,a)},p=function(e){return T.s(a%12||12,e,"0")},v=l||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(h,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return o+1;case"MM":return T.s(o+1,2,"0");case"MMM":return f(n.monthsShort,o,d,3);case"MMMM":return f(d,o);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(n.weekdaysMin,t.$W,c,2);case"ddd":return f(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(a);case"HH":return T.s(a,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return v(a,r,!0);case"A":return v(a,r,!1);case"m":return String(r);case"mm":return T.s(r,2,"0");case"s":return String(t.$s);case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(n,f,u){var p,h=this,v=T.p(f),b=k(n),m=(b.utcOffset()-this.utcOffset())*e,y=this-b,_=function(){return T.m(h,b)};switch(v){case l:p=_()/12;break;case c:p=_();break;case d:p=_()/3;break;case o:p=(y-m)/6048e5;break;case r:p=(y-m)/864e5;break;case a:p=y/t;break;case s:p=y/e;break;case i:p=y/1e3;break;default:p=y}return u?p:T.a(p)},b.daysInMonth=function(){return this.endOf(c).$D},b.$locale=function(){return _[this.$L]},b.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=C(e,t,!0);return i&&(n.$L=i),n},b.clone=function(){return T.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},v}(),w=E.prototype;return k.prototype=w,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",r],["$M",c],["$y",l],["$D",f]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,E,k),e.$i=!0),k},k.locale=C,k.isDayjs=$,k.unix=function(e){return k(1e3*e)},k.en=_[y],k.Ls=_,k.p={},k}()},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var a={},r=[],o=0;o<e.length;o++){var c=e[o],d=i.base?c[0]+i.base:c[0],l=a[d]||0,f="".concat(d," ").concat(l);a[d]=l+1;var u=n(f),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var h=s(p,i);i.byIndex=o,t.splice(o,0,{identifier:f,updater:h,references:1})}r.push(f)}return r}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var a=i(e=e||[],s=s||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var o=n(a[r]);t[o].references--}for(var c=i(e,s),d=0;d<a.length;d++){var l=n(a[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={id:i,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(379),t=n.n(e),i=n(795),s=n.n(i),a=n(569),r=n.n(a),o=n(565),c=n.n(o),d=n(216),l=n.n(d),f=n(589),u=n.n(f),p=n(10),h={};h.styleTagTransform=u(),h.setAttributes=c(),h.insert=r().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=l(),t()(p.Z,h),p.Z&&p.Z.locals&&p.Z.locals;const v="shake";class b{#e=null;constructor(){if(new.target===b)throw new Error("Can't instantiate AbstractView, only concrete one.")}get element(){return this.#e||(this.#e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(this.template)),this.#e}get template(){throw new Error("Abstract method not implemented: get template")}removeElement(){this.#e=null}shake(e){this.element.classList.add(v),setTimeout((()=>{this.element.classList.remove(v),e?.()}),600)}}const m="afterbegin";function y(e,t,n="beforeend"){if(!(e instanceof b))throw new Error("Can render only components");if(null===t)throw new Error("Container element doesn't exist");t.insertAdjacentElement(n,e.element)}function _(e,t){if(!(e instanceof b&&t instanceof b))throw new Error("Can replace only components");const n=e.element,i=t.element,s=i.parentElement;if(null===s)throw new Error("Parent element doesn't exist");s.replaceChild(n,i)}function g(e){if(null!==e){if(!(e instanceof b))throw new Error("Can remove only components");e.element.remove(),e.removeElement()}}var $=n(484),C=n.n($);const k=["taxi","bus","train","ship","drive","flight","check-in","sightseeing","restaurant"],T="HH:mm",E="DD/MM/YY HH:mm",w="everything",D="future",P="present",S="past",M=C()(),O={[w]:e=>e.filter((e=>e)),[D]:e=>e.filter((e=>C()(e.dateFrom)>M)),[P]:e=>e.filter((e=>C()(e.dateFrom)<=M&&C()(e.dateTo)>=M)),[S]:e=>e.filter((e=>C()(e.dateTo)<M))},F=[{id:"2d1ec240-1e78-4183-b27e-7023f2ce9320",description:"Kioto - famous for its crowded street markets with the best street food in Asia",name:"Kioto",pictures:[{src:"https://22.objects.htmlacademy.pro/static/destinations/5.jpg",description:"Kioto is a beautiful city"},{src:"https://22.objects.htmlacademy.pro/static/destinations/10.jpg",description:"Kioto with an embankment of a mighty river as a centre of attraction"},{src:"https://22.objects.htmlacademy.pro/static/destinations/10.jpg",description:"Kioto full of of cozy canteens where you can try the best coffee in the Middle East"},{src:"https://22.objects.htmlacademy.pro/static/destinations/20.jpg",description:"Kioto in a middle of Europe"}]},{id:"496bf9c6-7644-4068-baa0-8b1577df8854",description:"Amsterdam - middle-eastern paradise",name:"Amsterdam",pictures:[{src:"https://22.objects.htmlacademy.pro/static/destinations/13.jpg",description:"Amsterdam for those who value comfort and coziness"}]},{id:"97ba1bc6-b161-4015-b0a5-e1f31a3b972d",description:"Venice - a true asian pearl",name:"Venice",pictures:[{src:"https://22.objects.htmlacademy.pro/static/destinations/10.jpg",description:"Venice famous for its crowded street markets with the best street food in Asia"},{src:"https://22.objects.htmlacademy.pro/static/destinations/12.jpg",description:"Venice a true asian pearl"},{src:"https://22.objects.htmlacademy.pro/static/destinations/6.jpg",description:"Venice in a middle of Europe"},{src:"https://22.objects.htmlacademy.pro/static/destinations/16.jpg",description:"Venice in a middle of Europe"},{src:"https://22.objects.htmlacademy.pro/static/destinations/11.jpg",description:"Venice a true asian pearl"}]},{id:"9bbe4200-020c-4f3c-9640-81648421f209",description:"Berlin - famous for its crowded street markets with the best street food in Asia",name:"Berlin",pictures:[]},{id:"c8eab9ce-c072-4114-9412-76f8023ba638",description:"Helsinki - middle-eastern paradise",name:"Helsinki",pictures:[]},{id:"7d2cc347-4428-45cb-b406-ef07ed787acc",description:"Sochi - with crowded streets",name:"Sochi",pictures:[{src:"https://22.objects.htmlacademy.pro/static/destinations/3.jpg",description:"Sochi with an embankment of a mighty river as a centre of attraction"},{src:"https://22.objects.htmlacademy.pro/static/destinations/18.jpg",description:"Sochi a true asian pearl"},{src:"https://22.objects.htmlacademy.pro/static/destinations/13.jpg",description:"Sochi a true asian pearl"},{src:"https://22.objects.htmlacademy.pro/static/destinations/9.jpg",description:"Sochi with crowded streets"}]},{id:"21a059e3-af4a-4881-a3cc-40a381484c44",description:"",name:"Vien",pictures:[]},{id:"124c439f-1764-4bd2-917e-50973a77f227",description:"Chamonix-Mont-Blanc (usually shortened to Chamonix) is a resort area near the junction of France, Switzerland and Italy. At the base of Mont Blanc, the highest summit in the Alps, its renowned for its skiing.",name:"Chamonix",pictures:[{src:"https://22.objects.htmlacademy.pro/static/destinations/11.jpg",description:"Chamonix a perfect place to stay with a family"},{src:"https://22.objects.htmlacademy.pro/static/destinations/2.jpg",description:"Chamonix famous for its crowded street markets with the best street food in Asia"},{src:"https://22.objects.htmlacademy.pro/static/destinations/19.jpg",description:"Chamonix full of of cozy canteens where you can try the best coffee in the Middle East"},{src:"https://22.objects.htmlacademy.pro/static/destinations/19.jpg",description:"Chamonix in a middle of Europe"},{src:"https://22.objects.htmlacademy.pro/static/destinations/4.jpg",description:"Chamonix famous for its crowded street markets with the best street food in Asia"}]},{id:"53b6b366-1de8-447a-93ae-e71dc7d59aa7",description:"Rome - with a beautiful old town",name:"Rome",pictures:[{src:"https://22.objects.htmlacademy.pro/static/destinations/17.jpg",description:"Rome with a beautiful old town"},{src:"https://22.objects.htmlacademy.pro/static/destinations/18.jpg",description:"Rome in a middle of Europe"},{src:"https://22.objects.htmlacademy.pro/static/destinations/5.jpg",description:"Rome for those who value comfort and coziness"},{src:"https://22.objects.htmlacademy.pro/static/destinations/8.jpg",description:"Rome with crowded streets"}]},{id:"1b17f449-8447-46a0-934e-fc54af3dd4ca",description:"",name:"Oslo",pictures:[{src:"https://22.objects.htmlacademy.pro/static/destinations/19.jpg",description:"Oslo is a beautiful city"}]}],x=[{id:"a72349a8-ca9d-4c0d-9007-d9ae3db4e2ae",basePrice:8581,dateFrom:"2024-12-14T19:13:11.060Z",dateTo:"2024-12-16T01:45:11.060Z",destination:"c8eab9ce-c072-4114-9412-76f8023ba638",isFavorite:!1,offers:["1e7ab78b-3faa-48b3-aab7-266373f30cde"],type:"taxi"},{id:"d71d1b94-dc80-4b83-bd27-3ca705acfb33",basePrice:1120,dateFrom:"2024-12-18T01:25:11.060Z",dateTo:"2024-12-19T16:44:11.060Z",destination:"7d2cc347-4428-45cb-b406-ef07ed787acc",isFavorite:!1,offers:["1e7ab78b-3faa-48b3-aab7-266373f30cde"],type:"taxi"},{id:"44351617-c7fd-4118-9876-f6aa892e2f37",basePrice:3339,dateFrom:"2024-12-10T12:10:00.060Z",dateTo:"2024-12-11T12:00:00.060Z",destination:"9bbe4200-020c-4f3c-9640-81648421f209",isFavorite:!0,offers:["7f58bdd5-9809-4722-83c2-bcaa9e092e54","8309542d-7494-4299-a93c-32a2b4c982c2","f0d18307-8693-4c1a-b25b-043b3c1b9ed1","f9e6902f-48b3-4f5b-9755-2cf03531e149"],type:"ship"},{id:"efddfe0a-b94c-40ec-bad0-f63d7c1e56e1",basePrice:9946,dateFrom:"2024-12-23T10:20:11.060Z",dateTo:"2024-12-23T10:30:11.060Z",destination:"97ba1bc6-b161-4015-b0a5-e1f31a3b972d",isFavorite:!0,offers:[],type:"ship"},{id:"05928710-aa42-4cd7-ad19-2320b56c3ced",basePrice:2632,dateFrom:"2024-12-24T16:40:11.060Z",dateTo:"2024-12-25T20:17:11.060Z",destination:"124c439f-1764-4bd2-917e-50973a77f227",isFavorite:!0,offers:["f9cba921-201c-46e3-9f9c-181669310fc7","266854a6-32ce-43c2-afad-25fa2d1cff1f"],type:"restaurant"},{id:"a90e2114-1c72-4b20-984c-95c6d2c93d21",basePrice:9375,dateFrom:"2024-12-26T14:02:11.060Z",dateTo:"2024-12-27T18:52:11.060Z",destination:"124c439f-1764-4bd2-917e-50973a77f227",isFavorite:!0,offers:[],type:"train"},{id:"2b8b73ff-f17e-4596-ab44-0b53f98d42f4",basePrice:8216,dateFrom:"2024-12-28T11:46:11.060Z",dateTo:"2024-12-29T01:40:11.060Z",destination:"21a059e3-af4a-4881-a3cc-40a381484c44",isFavorite:!1,offers:["df563b88-4847-4a3c-ac72-e28a01d65345","df51a087-0baf-4b2b-8cd2-0d3da21acc53","1e7ab78b-3faa-48b3-aab7-266373f30cde"],type:"taxi"},{id:"bcd87b64-e570-41f9-af5b-c622c3822ebb",basePrice:7099,dateFrom:"2024-12-29T12:03:11.060Z",dateTo:"2024-12-30T06:27:11.060Z",destination:"c8eab9ce-c072-4114-9412-76f8023ba638",isFavorite:!0,offers:[],type:"ship"},{id:"cd8ee95b-95e9-42ab-81d2-232d1070b84a",basePrice:7453,dateFrom:"2024-12-30T14:34:11.060Z",dateTo:"2024-12-31T05:45:11.060Z",destination:"53b6b366-1de8-447a-93ae-e71dc7d59aa7",isFavorite:!0,offers:[],type:"restaurant"},{id:"81b18db0-4178-4d23-b135-0c4805ddef7e",basePrice:7777,dateFrom:"2025-01-01T20:52:11.060Z",dateTo:"2025-01-30T09:09:11.060Z",destination:"7d2cc347-4428-45cb-b406-ef07ed787acc",isFavorite:!1,offers:[],type:"restaurant"},{id:"7a10e74f-b5e4-4207-ad16-94bda36a2dc3",basePrice:5293,dateFrom:"2025-02-03T06:19:11.060Z",dateTo:"2025-02-03T14:36:11.060Z",destination:"53b6b366-1de8-447a-93ae-e71dc7d59aa7",isFavorite:!1,offers:["c2ae2b1c-afc4-43be-8163-f88ed2cd1137","cae3afff-8cb2-4490-b611-a0c25baac039"],type:"drive"},{id:"e1ccdcdd-d790-4c13-9482-828537be9e1e",basePrice:9581,dateFrom:"2025-02-04T07:52:11.060Z",dateTo:"2025-02-05T01:21:11.060Z",destination:"c8eab9ce-c072-4114-9412-76f8023ba638",isFavorite:!1,offers:["8309542d-7494-4299-a93c-32a2b4c982c2","f0d18307-8693-4c1a-b25b-043b3c1b9ed1","f9e6902f-48b3-4f5b-9755-2cf03531e149"],type:"ship"},{id:"7caa7469-cfe9-49a6-a48d-cfa3e8266cbb",basePrice:8613,dateFrom:"2025-02-05T20:40:11.060Z",dateTo:"2025-02-07T14:35:11.060Z",destination:"496bf9c6-7644-4068-baa0-8b1577df8854",isFavorite:!1,offers:["6a7e124a-0c0f-439d-b6e0-f98633920612"],type:"train"},{id:"cfc55ed5-b54f-40b4-a940-33b3ca7a719d",basePrice:9898,dateFrom:"2025-03-08T05:16:11.060Z",dateTo:"2025-03-08T22:20:11.060Z",destination:"2d1ec240-1e78-4183-b27e-7023f2ce9320",isFavorite:!1,offers:["df563b88-4847-4a3c-ac72-e28a01d65345","df51a087-0baf-4b2b-8cd2-0d3da21acc53","1e7ab78b-3faa-48b3-aab7-266373f30cde"],type:"taxi"},{id:"7a2e33ed-09b8-49ca-a358-76a180af93c9",basePrice:6171,dateFrom:"2025-03-09T14:23:11.060Z",dateTo:"2025-03-10T13:29:11.060Z",destination:"496bf9c6-7644-4068-baa0-8b1577df8854",isFavorite:!0,offers:[],type:"taxi"},{id:"7d843d6c-cd96-4d4d-850e-1793a53b28fc",basePrice:9467,dateFrom:"2025-03-11T22:35:11.060Z",dateTo:"2025-03-12T15:33:11.060Z",destination:"c8eab9ce-c072-4114-9412-76f8023ba638",isFavorite:!1,offers:[],type:"bus"},{id:"6ee96ae1-6454-49ee-bd21-5f6d0a315fca",basePrice:761,dateFrom:"2025-03-13T18:04:11.060Z",dateTo:"2025-03-15T14:35:11.060Z",destination:"9bbe4200-020c-4f3c-9640-81648421f209",isFavorite:!0,offers:["04f9d7a2-5515-4404-8f46-720eed54bde7","9cfa4298-4ac7-4e98-ab73-adbbc3eba2e2"],type:"flight"},{id:"18e57d62-95a3-433a-bef3-07bc5c013bdb",basePrice:748,dateFrom:"2025-03-17T04:29:11.060Z",dateTo:"2025-03-18T13:56:11.060Z",destination:"53b6b366-1de8-447a-93ae-e71dc7d59aa7",isFavorite:!0,offers:["f671947a-8b29-4c39-99fc-d56adfb34ef5"],type:"bus"},{id:"989158b1-d4c9-4a03-8e14-f2ef8997e349",basePrice:6737,dateFrom:"2025-03-19T00:29:11.060Z",dateTo:"2025-03-19T20:50:11.060Z",destination:"9bbe4200-020c-4f3c-9640-81648421f209",isFavorite:!1,offers:["319d74a8-a921-4fe0-8af7-9d04025028e6","ebe35193-f40b-4980-8534-d3ccf5bb00a0","c22f8e91-8517-4e7c-bca7-c317eb0427ed","b661a95e-82fe-407c-b3e6-0494959e8270"],type:"check-in"},{id:"f0ec862b-5357-4346-b14d-a2be1d12322b",basePrice:2088,dateFrom:"2025-03-21T01:54:11.060Z",dateTo:"2025-03-22T13:27:11.060Z",destination:"c8eab9ce-c072-4114-9412-76f8023ba638",isFavorite:!1,offers:["4f826ce7-b60e-4feb-a6a6-5fba9ad65c68","dd5a0d0e-d1ae-4afc-bc8a-a68eb2e4c54b","df563b88-4847-4a3c-ac72-e28a01d65345","df51a087-0baf-4b2b-8cd2-0d3da21acc53","1e7ab78b-3faa-48b3-aab7-266373f30cde"],type:"taxi"},{id:"a1e50061-b946-44c1-a542-82f1f47a57f7",basePrice:2317,dateFrom:"2025-03-24T12:51:11.060Z",dateTo:"2025-03-25T22:33:11.060Z",destination:"496bf9c6-7644-4068-baa0-8b1577df8854",isFavorite:!1,offers:[],type:"ship"},{id:"8d5d2b55-96d7-4e2f-b6c5-f79ab4f69876",basePrice:3593,dateFrom:"2025-03-26T19:09:11.060Z",dateTo:"2025-03-27T19:49:11.060Z",destination:"7d2cc347-4428-45cb-b406-ef07ed787acc",isFavorite:!0,offers:[],type:"sightseeing"},{id:"07f20ffa-6b2d-4905-8dee-0140d539f205",basePrice:748,dateFrom:"2025-03-29T06:54:11.060Z",dateTo:"2025-03-30T11:59:11.060Z",destination:"496bf9c6-7644-4068-baa0-8b1577df8854",isFavorite:!0,offers:[],type:"taxi"},{id:"f13e5fd4-42ab-4b2e-bdb6-4002532c33c5",basePrice:7669,dateFrom:"2025-03-31T14:21:11.060Z",dateTo:"2025-03-02T05:12:11.060Z",destination:"c8eab9ce-c072-4114-9412-76f8023ba638",isFavorite:!0,offers:["a679fab7-7434-49e8-8ba3-ba810a5e7724","6a7e124a-0c0f-439d-b6e0-f98633920612"],type:"train"},{id:"2ea1c048-685c-4ade-ba7c-058b6ab98594",basePrice:8686,dateFrom:"2025-03-02T12:04:11.060Z",dateTo:"2025-03-03T10:52:11.060Z",destination:"2d1ec240-1e78-4183-b27e-7023f2ce9320",isFavorite:!0,offers:["b661a95e-82fe-407c-b3e6-0494959e8270"],type:"check-in"}],j={id:"",basePrice:"",dateFrom:(new Date).setHours(0,0,0,0),dateTo:(new Date).setHours(0,0,0,0),destination:"",isFavorite:!1,offers:[],type:"flight"},A=[{type:"taxi",offers:[{id:"4f826ce7-b60e-4feb-a6a6-5fba9ad65c68",title:"Upgrade to a business class",price:75},{id:"dd5a0d0e-d1ae-4afc-bc8a-a68eb2e4c54b",title:"Choose the radio station",price:104},{id:"df563b88-4847-4a3c-ac72-e28a01d65345",title:"Choose temperature",price:99},{id:"df51a087-0baf-4b2b-8cd2-0d3da21acc53",title:"Drive quickly, I'm in a hurry",price:80},{id:"1e7ab78b-3faa-48b3-aab7-266373f30cde",title:"Drive slowly",price:96}]},{type:"bus",offers:[{id:"2d541885-7c81-4293-9602-96376ec81fb6",title:"Infotainment system",price:59},{id:"6839add0-091d-4144-b3a5-210187235ae8",title:"Order meal",price:159},{id:"f671947a-8b29-4c39-99fc-d56adfb34ef5",title:"Choose seats",price:65}]},{type:"train",offers:[{id:"0c8b452c-9a54-4aa5-a7d2-db6d34c95456",title:"Book a taxi at the arrival point",price:159},{id:"a679fab7-7434-49e8-8ba3-ba810a5e7724",title:"Order a breakfast",price:151},{id:"6a7e124a-0c0f-439d-b6e0-f98633920612",title:"Wake up at a certain time",price:177}]},{type:"flight",offers:[{id:"65bcf5d6-348b-488e-bdba-2c08d497eb8e",title:"Choose meal",price:106},{id:"39a0e0ff-be69-4249-8003-a31eb0b2cf93",title:"Choose seats",price:114},{id:"972c9b08-c84d-4be6-8511-93922a208e3e",title:"Upgrade to comfort class",price:194},{id:"7d8a3707-7953-4d47-b46b-ebf3889b5190",title:"Upgrade to business class",price:193},{id:"04f9d7a2-5515-4404-8f46-720eed54bde7",title:"Add luggage",price:66},{id:"9cfa4298-4ac7-4e98-ab73-adbbc3eba2e2",title:"Business lounge",price:80}]},{type:"check-in",offers:[{id:"245f88c9-fde6-4d7f-a4c7-94d1482aa34f",title:"Choose the time of check-in",price:169},{id:"319d74a8-a921-4fe0-8af7-9d04025028e6",title:"Choose the time of check-out",price:126},{id:"ebe35193-f40b-4980-8534-d3ccf5bb00a0",title:"Add breakfast",price:39},{id:"c22f8e91-8517-4e7c-bca7-c317eb0427ed",title:"Laundry",price:84},{id:"b661a95e-82fe-407c-b3e6-0494959e8270",title:"Order a meal from the restaurant",price:139}]},{type:"sightseeing",offers:[]},{type:"ship",offers:[{id:"24ab1acf-10d1-45eb-ab43-864fbd4d957f",title:"Choose meal",price:119},{id:"c651fe18-cf4e-4649-872b-34a89b5a533d",title:"Choose seats",price:197},{id:"7f58bdd5-9809-4722-83c2-bcaa9e092e54",title:"Upgrade to comfort class",price:104},{id:"8309542d-7494-4299-a93c-32a2b4c982c2",title:"Upgrade to business class",price:73},{id:"f0d18307-8693-4c1a-b25b-043b3c1b9ed1",title:"Add luggage",price:155},{id:"f9e6902f-48b3-4f5b-9755-2cf03531e149",title:"Business lounge",price:86}]},{type:"drive",offers:[{id:"c2ae2b1c-afc4-43be-8163-f88ed2cd1137",title:"With automatic transmission",price:144},{id:"cae3afff-8cb2-4490-b611-a0c25baac039",title:"With air conditioning",price:120}]},{type:"restaurant",offers:[{id:"f9cba921-201c-46e3-9f9c-181669310fc7",title:"Choose live music",price:127},{id:"266854a6-32ce-43c2-afad-25fa2d1cff1f",title:"Choose VIP area",price:88}]}];function H(e){return e[0].toUpperCase()+e.slice(1)}function Z(e){return e.replace(/\s+/g,"-").toLowerCase()}function L(e,t){return e.map((e=>e.id===t.id?t:e))}function B(e,t){return e?C()(e).format(t):""}function I(e){return C()(e.dateFrom).diff(e.dateTo)}class q extends b{#t=null;#n=null;#i=null;#s=null;#a=null;constructor({event:e,currentDestination:t,currentOffersPack:n,toggleClickHandler:i,favoriteClickHandler:s}){super(),this.#t=e,this.#n=t,this.#i=n,this.#s=i,this.#a=s,this.element.querySelector(".event__rollup-btn").addEventListener("click",this.#r),this.element.querySelector(".event__favorite-btn").addEventListener("click",this.#o)}get template(){return function(e,t,n){const{id:i,type:s,dateFrom:a,dateTo:r,basePrice:o}=e,c=B(a,"MMM DD"),d=B(a,T),l=B(r,T),f=function(e,t){const n=C()(e).diff(t,"day"),i=C()(e).diff(t,"hour")-24*n,s=C()(e).diff(t,"minute")-(60*i+24*n*60);let a="";n>0&&n<10?a=`0${n}D`:n>=10&&(a=`${n}D`);let r="";return i>0&&i<10?r=`0${i}H`:i>=10?r=`${i}H`:0!==n&&(r="00H"),`${a} ${r} ${0!==s?`${s}M`:"00M"}`}(r,e.dateFrom),u=e.isFavorite?" event__favorite-btn--active":"",p=t?t.name:"";return`<li class="trip-events__item">\n      <div id = "${i}" class="event">\n        <time class="event__date" datetime="${a}">${c}</time>\n        <div class="event__type">\n          <img class="event__type-icon" width="42" height="42" src="img/icons/${s}.png" alt="Event type icon">\n        </div>\n        <h3 class="event__title">${H(s)} ${p}</h3>\n        <div class="event__schedule">\n          <p class="event__time">\n            <time class="event__start-time" datetime="${a}">${d}</time>\n            &mdash;\n            <time class="event__end-time" datetime="${r}">${l}</time>\n          </p>\n          <p class="event__duration">${f}</p>\n        </div>\n        <p class="event__price">\n          &euro;&nbsp;<span class="event__price-value">${o}</span>\n        </p>\n        ${function(e,t){const n=t.offers.filter((t=>e.offers.includes(t.id)));return 0!==n.length?`<h4 class="visually-hidden">Offers:</h4>\n      <ul class="event__selected-offers">\n        ${n.map((e=>function(e){const{title:t,price:n}=e;return`<li class="event__offer">\n      <span class="event__offer-title">${t}</span>\n      &plus;&euro;&nbsp;\n      <span class="event__offer-price">${n}</span>\n    </li>`}(e))).join("")}\n      </ul>`:""}(e,n)}\n        <button class="event__favorite-btn${u}" type="button">\n          <span class="visually-hidden">Add to favorite</span>\n          <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n            <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n          </svg>\n        </button>\n        <button class="event__rollup-btn" type="button">\n          <span class="visually-hidden">Open event</span>\n        </button>\n      </div>\n    </li>`}(this.#t,this.#n,this.#i)}#r=e=>{e.preventDefault(),this.#s()};#o=e=>{e.preventDefault(),this.#a()}}class U extends b{_state={};updateElement(e){e&&(this._setState(e),this.#c())}_restoreHandlers(){throw new Error("Abstract method not implemented: restoreHandlers")}_setState(e){this._state=structuredClone({...this._state,...e})}_parseEventToState(e){return{...e}}_parseStateToEvent(e){return{...e}}#c(){const e=this.element,t=e.parentElement;this.removeElement();const n=this.element;t.replaceChild(n,e),this._restoreHandlers()}}class V extends U{#t=null;#n=null;#i=null;#d=null;#l=null;#s=null;#f=null;constructor({event:e,currentDestination:t,currentOffersPack:n,allDestinations:i,allOffersPacks:s,toggleClickHandler:a,formSubmitHandler:r}){super(),this._setState(this._parseEventToState(e)),this.#n=t,this.#i=n,this.#d=i,this.#l=s,this.#s=a,this.#f=r,this._restoreHandlers()}get template(){return function(e,t,n,i){const{id:s,type:a,dateFrom:r,dateTo:o,basePrice:c}=e;return`<li class="trip-events__item">\n      <form class="event event--edit" action="#" method="post">\n        <header class="event__header">\n          <div class="event__type-wrapper">\n            <label class="event__type  event__type-btn" for="event-type-toggle-${s}">\n              <span class="visually-hidden">Choose event type</span>\n              <img class="event__type-icon" width="17" height="17" src="img/icons/${a}.png" alt="Event type icon">\n            </label>\n            <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${s}" type="checkbox">\n            ${function(e,t,n){return`<div class="event__type-list">\n      <fieldset class="event__type-group">\n        <legend class="visually-hidden">Event type</legend>\n        ${t.map((t=>function(e,t,n){return`<div class="event__type-item">\n      <input id="event-type-${t}-${n}" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${t}" ${e.type===t?"checked":""}>\n      <label class="event__type-label  event__type-label--${t}" for="event-type-${t}-${n}">${H(t)}</label>\n    </div>`}(e,t,n))).join("")}\n      </fieldset>\n    </div>`}(e,k,s)}\n          </div>\n\n          <div class="event__field-group  event__field-group--destination">\n            <label class="event__label  event__type-output" for="event-destination-${s}">\n              ${H(a)}\n            </label>\n            <input\n              class="event__input  event__input--destination"\n              id="event-destination-${s}"\n              type="text"\n              name="event-destination"\n              value="${t?t.name:""}"\n              list="destination-list-${s}">\n              ${function(e,t){return`<datalist id="destination-list-${t}">\n      ${e.map((e=>`<option value="${e.name}"></option>`)).join("")}\n    </datalist>`}(i,s)}\n          </div>\n\n          <div class="event__field-group  event__field-group--time">\n            <label class="visually-hidden" for="event-start-time-${s}">From</label>\n            <input class="event__input  event__input--time" id="event-start-time-${s}" type="text" name="event-start-time" value="${B(r,E)}">\n            &mdash;\n            <label class="visually-hidden" for="event-end-time-${s}">To</label>\n            <input class="event__input  event__input--time" id="event-end-time-${s}" type="text" name="event-end-time" value="${B(o,E)}">\n          </div>\n\n          <div class="event__field-group  event__field-group--price">\n            <label class="event__label" for="event-price-${s}">\n              <span class="visually-hidden">Price</span>\n              &euro;\n            </label>\n            <input class="event__input  event__input--price" id="event-price-${s}" type="text" name="event-price" value="${c}">\n          </div>\n\n          <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n          <button class="event__reset-btn" type="reset">Delete</button>\n          <button class="event__rollup-btn" type="button">\n            <span class="visually-hidden">Open event</span>\n          </button>\n        </header>\n        <section class="event__details">\n          ${function(e,t={},n){return 0!==t.offers.length?`<section class="event__section  event__section--offers">\n      <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n      <div class="event__available-offers">\n        ${t.offers.map((t=>function(e,t,n){const{title:i,price:s}=e,a=Z(i),r=t.offers.includes(e.id)?"checked":"";return`<div class="event__offer-selector">\n      <input\n        id="event-offer-${a}-${n}"\n        class="event__offer-checkbox  visually-hidden"\n        type="checkbox"\n        name="event-offer-${a}"\n        data-offer-id="${e.id}"\n        value="${i}"\n        ${r}>\n      <label class="event__offer-label" for="event-offer-${a}-${n}">\n        <span class="event__offer-title">${i}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${s}</span>\n      </label>\n    </div>`}(t,e,n))).join("")}\n      </div>\n    </section>`:""}(e,n,s)}\n\n          ${function(e){if(!e)return"";const{description:t,pictures:n}=e;return""!==t||0!==n.length?`<section class="event__section  event__section--destination">\n        <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n        <p class="event__destination-description">${t}</p>\n        ${function(e=[]){return 0!==e.length?`<div class="event__photos-container">\n      <div class="event__photos-tape">\n        ${e.map((e=>`<img class="event__photo" src="${e.src}" alt="${e.description}">`)).join("")}\n      </div>\n    </div>`:""}(n)}\n      </section>`:""}(t)}\n        </section>\n      </form>\n    </li>`}(this._state,this.#n,this.#i,this.#d,this.#l)}_restoreHandlers(){this.element.querySelector(".event__rollup-btn").addEventListener("click",this.#r),this.element.querySelector(".event__type-list").addEventListener("click",this.#u),this.element.querySelector(".event__input--destination").addEventListener("change",this.#p),this.element.querySelector(".event__input--price").addEventListener("change",this.#h),this.element.querySelector("form").addEventListener("submit",this.#v),0!==this.#i.offers.length&&this.element.querySelector(".event__available-offers").addEventListener("click",this.#b)}#m(e){const t=this.#l.find((t=>t.type===e));this.#i=t,this.updateElement({type:e,offers:[]})}#r=e=>{e.preventDefault(),this.#s()};#v=e=>{e.preventDefault(),this.#f(this._parseStateToEvent(this._state))};#u=e=>{const t=e.target.closest("input"),n=this.element.querySelector(".event__type-toggle");if(t){e.stopPropagation(),e.preventDefault();const i=t.value;i!==this._state.type&&this.#m(i),n.checked=!1}};#p=e=>{e.preventDefault();const t=e.target.value,n=this.#d.find((e=>e.name===t));n&&this.#n!==n?(this.#n=n,this.updateElement({destination:n.id})):(this.#n=null,this.updateElement({destination:""}))};#h=e=>{e.preventDefault();const t=e.target.value;this.updateElement({basePrice:t})};#b=e=>{const t=e.target.closest("input");if(t){e.stopPropagation();const n=t.dataset.offerId;this._state.offers.includes(n)?this.updateElement({offers:[...this._state.offers.filter((e=>e!==n))]}):this.updateElement({offers:[...this._state.offers,n]})}}}const N="default",Y="editing";class W{#y=null;#_=null;#g=null;#t=null;#d=null;#l=null;#n=null;#i=null;#$=null;#C=null;#k=N;constructor({eventListContainer:e,allDestinations:t,allOffersPacks:n,onEventUpdate:i,onModeChange:s}){this.#y=e,this.#d=t,this.#l=n,this.#$=i,this.#C=s}init({event:e,currentDestination:t,currentOffersPack:n}){this.#t=e,this.#n=t,this.#i=n;const i=this.#_,s=this.#g;this.#_=new q({event:this.#t,currentDestination:this.#n,currentOffersPack:this.#i,toggleClickHandler:this.#T,favoriteClickHandler:this.#o}),this.#g=new V({event:this.#t,currentDestination:this.#n,currentOffersPack:this.#i,allDestinations:this.#d,allOffersPacks:this.#l,toggleClickHandler:this.#E,formSubmitHandler:this.#v}),null!==i&&null!==s?(this.#k===N&&_(this.#_,i),this.#k===Y&&_(this.#g,s),g(i),g(s)):y(this.#_,this.#y)}destroy(){g(this.#_),g(this.#g)}resetView(){this.#k!==N&&this.#w()}#w(){_(this.#_,this.#g),document.removeEventListener("keydown",this.#D),this.#k=N}#P(){_(this.#g,this.#_),document.addEventListener("keydown",this.#D),this.#C(),this.#k=Y}#D=e=>{(function(e){return"Escape"===e.key})(e)&&(e.preventDefault(),this.#w())};#T=()=>{this.#P()};#E=()=>{this.#w()};#o=()=>{this.#$({...this.#t,isFavorite:!this.#t.isFavorite})};#v=e=>{this.#$(e),this.#w()}}class z extends b{get template(){return'<section class="trip-events">\n      <h2 class="visually-hidden">Trip events</h2>\n    </section>'}}class R extends b{#S=null;#M=null;constructor({sortTypes:e,onSortTypeChangeClick:t}){super(),this.#S=e,this.#M=t,this.element.addEventListener("click",this.#O)}get template(){return function(e){return`<form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n      ${e.slice().map((e=>function(e){const{name:t,isAvailable:n,isDefault:i}=e;return`<div class="trip-sort__item  trip-sort__item--${t}">\n      <input\n        id="sort-${t}"\n        data-sort-type="${t}"\n        class="trip-sort__input  visually-hidden"\n        type="radio"\n        name="trip-sort"\n        value="sort-${t}"\n        ${i?"checked":""}\n        ${n?"":"disabled"}>\n      <label class="trip-sort__btn" for="sort-${t}">${H(t)}</label>\n    </div>`}(e))).join("")}\n    </form>`}(this.#S)}#O=e=>{"INPUT"===e.target.tagName&&this.#M(e.target.dataset.sortType)}}class K extends b{get template(){return'<ul class="trip-events__list"></ul>'}}class J extends b{constructor(){super()}get template(){return'<p class="trip-events__msg">Click New Event to create your first point</p>'}}const X=[{name:"day",isAvailable:!0,isDefault:!0},{name:"event",isAvailable:!1,isDefault:!1},{name:"time",isAvailable:!0,isDefault:!1},{name:"price",isAvailable:!0,isDefault:!1},{name:"offers",isAvailable:!1,isDefault:!1}];function Q(e,t){return null===e&&null===t?0:null===e?1:null===t?-1:null}function G(e,t){return Q(e.dateFrom,t.dateFrom)??C()(e.dateFrom).diff(C()(t.dateFrom))}function ee(e,t){return Q(e.dateFrom,t.dateFrom)??I(e)-I(t)}function te(e,t){return t.basePrice-e.basePrice}class ne{static get sortTypes(){return X}static get defaultSortType(){return X.find((e=>!0===e.isDefault)).name}static sortEvents(e,t){switch(e){case"time":t.sort(ee);break;case"price":t.sort(te);break;default:t.sort(G)}}}class ie extends U{#t=null;#n=null;#i=null;#d=null;#l=null;constructor({event:e,currentDestination:t,currentOffersPack:n,allDestinations:i,allOffersPacks:s}){super(),this._setState(this._parseEventToState(e)),this.#n=t,this.#i=n,this.#d=i,this.#l=s,this._restoreHandlers()}get template(){return function(e,t,n,i){const{id:s,type:a,dateFrom:r,dateTo:o,basePrice:c}=e;return`<li class="trip-events__item">\n      <form class="event event--edit" action="#" method="post">\n        <header class="event__header">\n          <div class="event__type-wrapper">\n            <label class="event__type  event__type-btn" for="event-type-toggle-${s}">\n              <span class="visually-hidden">Choose event type</span>\n              <img class="event__type-icon" width="17" height="17" src="img/icons/${a}.png" alt="Event type icon">\n            </label>\n            <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${s}" type="checkbox">\n            ${function(e,t,n){return`<div class="event__type-list">\n      <fieldset class="event__type-group">\n        <legend class="visually-hidden">Event type</legend>\n        ${t.map((t=>function(e,t,n){return`<div class="event__type-item">\n      <input id="event-type-${t}-${n}" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${t}" ${e.type===t?"checked":""}>\n      <label class="event__type-label  event__type-label--${t}" for="event-type-${t}-${n}">${H(t)}</label>\n    </div>`}(e,t,n))).join("")}\n      </fieldset>\n    </div>`}(e,k,s)}\n          </div>\n\n          <div class="event__field-group  event__field-group--destination">\n            <label class="event__label  event__type-output" for="event-destination-${s}">\n              ${H(a)}\n            </label>\n            <input\n              class="event__input  event__input--destination"\n              id="event-destination-${s}"\n              type="text"\n              name="event-destination"\n              value="${t?t.name:""}"\n              list="destination-list-${s}">\n            ${function(e,t){return`<datalist id="destination-list-${t}">\n      ${e.map((e=>`<option value="${e.name}"></option>`)).join("")}\n    </datalist>`}(i,s)}\n          </div>\n\n          <div class="event__field-group  event__field-group--time">\n            <label class="visually-hidden" for="event-start-time-${s}">From</label>\n            <input class="event__input  event__input--time" id="event-start-time-${s}" type="text" name="event-start-time" value="${B(r,E)}">\n            &mdash;\n            <label class="visually-hidden" for="event-end-time-${s}">To</label>\n            <input class="event__input  event__input--time" id="event-end-time-${s}" type="text" name="event-end-time" value="${B(o,E)}">\n          </div>\n\n          <div class="event__field-group  event__field-group--price">\n            <label class="event__label" for="event-price-${s}">\n              <span class="visually-hidden">Price</span>\n              &euro;\n            </label>\n            <input class="event__input  event__input--price" id="event-price-${s}" type="text" name="event-price" value="${c}">\n          </div>\n\n          <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n          <button class="event__reset-btn" type="reset">Cancel</button>\n        </header>\n        <section class="event__details">\n          ${function(e,t={},n){return 0!==t.offers.length?`<section class="event__section  event__section--offers">\n      <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n      <div class="event__available-offers">\n        ${t.offers.map((t=>function(e,t,n){const{title:i,price:s}=e,a=Z(i),r=t.offers.includes(e.id)?"checked":"";return`<div class="event__offer-selector">\n      <input\n        id="event-offer-${a}-${n}"\n        class="event__offer-checkbox  visually-hidden"\n        type="checkbox"\n        name="event-offer-${a}"\n        data-offer-id="${e.id}"\n        value="${i}"\n        ${r}>\n      <label class="event__offer-label" for="event-offer-${a}-${n}">\n        <span class="event__offer-title">${i}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${s}</span>\n      </label>\n    </div>`}(t,e,n))).join("")}\n      </div>\n    </section>`:""}(e,n,s)}\n\n          ${function(e){if(!e)return"";const{description:t,pictures:n}=e;return""!==t||0!==n.length?`<section class="event__section  event__section--destination">\n        <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n        <p class="event__destination-description">${t}</p>\n        ${function(e=[]){return 0!==e.length?`<div class="event__photos-container">\n      <div class="event__photos-tape">\n        ${e.map((e=>`<img class="event__photo" src="${e.src}" alt="${e.description}">`)).join("")}\n      </div>\n    </div>`:""}(n)}\n      </section>`:""}(t)}\n        </section>\n      </form>\n    </li>`}(this._state,this.#n,this.#i,this.#d,this.#l)}_restoreHandlers(){this.element.querySelector(".event__type-list").addEventListener("click",this.#u),this.element.querySelector(".event__input--destination").addEventListener("change",this.#p),this.element.querySelector(".event__input--price").addEventListener("change",this.#h),0!==this.#i.offers.length&&this.element.querySelector(".event__available-offers").addEventListener("click",this.#b)}#m(e){const t=this.#l.find((t=>t.type===e));this.#i=t,this.updateElement({type:e,offers:[]})}#u=e=>{const t=e.target.closest("input"),n=this.element.querySelector(".event__type-toggle");if(t){e.stopPropagation(),e.preventDefault();const i=t.value;i!==this._state.type&&this.#m(i),n.checked=!1}};#p=e=>{e.preventDefault();const t=e.target.value,n=this.#d.find((e=>e.name===t));n&&this.#n!==n?(this.#n=n,this.updateElement({destination:n.id})):(this.#n=null,this.updateElement({destination:""}))};#h=e=>{e.preventDefault();const t=e.target.value;this.updateElement({basePrice:t})};#b=e=>{const t=e.target.closest("input");if(t){e.stopPropagation();const n=t.dataset.offerId;this._state.offers.includes(n)?this.updateElement({offers:[...this._state.offers.filter((e=>e!==n))]}):this.updateElement({offers:[...this._state.offers,n]})}}}const se=document.querySelector(".page-header").querySelector(".trip-controls__filters"),ae=document.querySelector(".page-main").querySelector(".page-body__container"),re=document.querySelector(".trip-main__event-add-btn"),oe=new class{#F=[];init(){this.#F=F}get destinations(){return this.#F}getDestinationById(e){return this.#F.find((t=>t.id===e))}},ce=new class{#x=[];init(){this.#x=x}get events(){return this.#x}get defaultEvent(){return structuredClone(j)}},de=new class{#j=[];init(){this.#j=A}get offersPacks(){return this.#j}getOffersPackByType(e){return this.#j.find((t=>t.type===e))}},le=new class{#A=null;#H=null;#Z=new z;#L=null;#B=new K;#I=new J;#x=[];#q=[];#U=new Map;#V=null;#N=null;#Y=null;#W=ne.defaultSortType;constructor({tripContainer:e,eventCreate:t,destinationsModel:n,eventsModel:i,offersModel:s}){this.#A=e,this.#H=t,this.#V=n,this.#N=i,this.#Y=s,this.#H.addEventListener("click",this.#z)}init(){this.#x=[...this.#N.events],this.#R(this.#W),this.#q=[...this.#x],this.#K()}#z=()=>{const e=this.#N.defaultEvent;y(new ie({event:e,currentDestination:this.#V.getDestinationById(e.destination),currentOffersPack:this.#Y.getOffersPackByType(e.type),allDestinations:this.#V.destinations,allOffersPacks:this.#Y.offersPacks}),this.#B.element,m)};#C=()=>{this.#U.forEach((e=>e.resetView()))};#$=e=>{this.#x=L(this.#x,e),this.#q=L(this.#x,e),this.#U.get(e.id).init({event:e,currentDestination:this.#V.getDestinationById(e.destination),currentOffersPack:this.#Y.getOffersPackByType(e.type)})};#R(e){ne.sortEvents(e,this.#x),this.#W=e}#M=e=>{this.#W!==e&&(this.#R(e),this.#J(),this.#X())};#Q(){this.#L=new R({sortTypes:ne.sortTypes,onSortTypeChangeClick:this.#M}),y(this.#L,this.#Z.element,m)}#G(e){const t=new W({eventListContainer:this.#B.element,allDestinations:this.#V.destinations,allOffersPacks:this.#Y.offersPacks,onEventUpdate:this.#$,onModeChange:this.#C});t.init({event:e,currentDestination:this.#V.getDestinationById(e.destination),currentOffersPack:this.#Y.getOffersPackByType(e.type)}),this.#U.set(e.id,t)}#ee(){for(let e=0;e<this.#x.length;e++)this.#G(this.#x[e])}#te(){y(this.#I,this.#Z.element,m)}#J(){this.#U.forEach((e=>e.destroy())),this.#U.clear()}#X(){y(this.#B,this.#Z.element),this.#ee()}#K(){y(this.#Z,this.#A),0!==this.#x.length?(this.#Q(),this.#X()):this.#te()}}({tripContainer:ae,eventCreate:re,destinationsModel:oe,eventsModel:ce,offersModel:de});oe.init(),ce.init(),de.init(),le.init();const fe=(ue=ce.events,Object.entries(O).map((([e,t])=>({type:e,count:t(ue).length}))));var ue;y(new class extends b{#ne=null;constructor({filters:e}){super(),this.#ne=e}get template(){return function(e){return`<form class="trip-filters" action="#" method="get">\n      ${e.map((e=>function(e){const{type:t,count:n}=e;return`<div class="trip-filters__filter">\n      <input id="filter-${t}" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="${t}" ${0===n?"disabled":""}>\n      <label class="trip-filters__filter-label" for="filter-${t}">${H(t)}</label>\n    </div>`}(e))).join("")}\n      <button class="visually-hidden" type="submit">Accept filter</button>\n    </form>`}(this.#ne)}}({filters:fe}),se)})()})();
//# sourceMappingURL=bundle.0ac36d02a1dd100d1fc9.js.map